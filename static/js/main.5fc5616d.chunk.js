(this["webpackJsonptraveling-salesman-problem-project"]=this["webpackJsonptraveling-salesman-problem-project"]||[]).push([[0],{24:function(e,t,n){e.exports={listItem:"CountriesListItem_listItem__1AACx",name:"CountriesListItem_name__3B7OP",flag:"CountriesListItem_flag__2-aXz"}},25:function(e,t,n){e.exports={list:"CountriesList_list__3Icoz",title:"CountriesList_title__13FPx",subtitle:"CountriesList_subtitle__23Q_d"}},30:function(e,t,n){e.exports={header:"Header_header__1iyXP"}},31:function(e,t,n){e.exports={layout:"Layout_layout__3v3M_",main:"Layout_main__15PIg"}},33:function(e,t,n){e.exports={card:"Card_card__UdCbW"}},34:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__2Dwi3"}},35:function(e,t,n){e.exports={line:"Lines_line__3w39p"}},36:function(e,t,n){e.exports={marker:"Markers_marker__1xk57"}},37:function(e,t,n){e.exports={map:"Map_map__1TtUq"}},50:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(32),s=n.n(c),o=n(2),i=n.n(o),u=n(13),l=n(8),d=n(7),p=n(33),j=n.n(p),f=n(0),m=function(e){return Object(f.jsx)("div",{className:j.a.card,children:e.children})},b=a.a.createContext({selectedCountries:[],sortedCoordinates:[],addSelectedCountry:function(){},removeSelectedCountry:function(){},selectedCoordinates:{},dragItem:{},allFlags:{set:function(){},get:[]}}),h="https://traveling-salesman-probl-12def-default-rtdb.europe-west1.firebasedatabase.app",g="https://countriesnow.space/api/v0.1/countries",O="ADD",y="REMOVE",x="ADD_COUNTRY",v="REMOVE_COUNTRY",C="light",_="dark",N=n(24),k=n.n(N),w=function(e){var t=Object(r.useContext)(b).dragItem;return Object(f.jsxs)("li",{"data-testid":"countryListItem",className:k.a.listItem,onClick:function(){e.onSelectCountry(e.countryName)},draggable:!0,onDragStart:function(n){return r=e.countryName,a=e.listType,void t.set({country:r,type:a});var r,a},onDragEnd:function(){t.set({})},children:[Object(f.jsx)("p",{"data-testid":"countryName",className:k.a.name,children:e.countryName}),Object(f.jsx)("img",{"data-testid":"flag",className:k.a.flag,src:e.flagUrl,alt:e.flagUrl,draggable:!1})]})},E=n(34),L=n.n(E),S=function(){return Object(f.jsx)("div",{className:L.a.spinner})},I=n(25),T=n.n(I),D=function(e){var t=Object(r.useContext)(b),n=t.selectedCountries,a=t.addSelectedCountry,c=t.removeSelectedCountry,s=t.allFlags,o=t.dragItem,i=s.get,u=!Object.keys(i).length,l=e.highlighted?{border:"0.5rem dashed #c5efc5"}:null,d=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.listType;r===O&&n.length<8?a(t):r===y&&c(t)},p=e.countries.filter((function(t){return e.listType===O?!n.includes(t):t})).map((function(t){return Object(f.jsx)(w,{"data-testid":"countriesList",flagUrl:i[t],countryName:t,listType:e.listType,onSelectCountry:d},t)}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{className:T.a.title,children:e.title}),Object(f.jsx)("p",{className:T.a.subtitle,children:e.subtitle}),Object(f.jsxs)("ul",{"data-testid":"countriesList",style:l,className:T.a.list,onDragOver:function(e){e.preventDefault()},onDrop:function(){return o.set({}),void(o.get.type!==e.listType&&d(o.get.country,o.get.type))},children:[u&&e.listType===O&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{}),Object(f.jsx)("h3",{children:"Loading..."})]}),!u&&p]})]})},M=D,A=n(30),F=n.n(A),U=function(e){return Object(f.jsxs)("header",{className:F.a.header,children:[Object(f.jsx)("h1",{children:"TRAVELLING SALESMAN PROBLEM"}),Object(f.jsx)("button",{"data-testid":"button",className:F.a.logo,onClick:e.changeThemeHandler})]})},P=n(31),R=n.n(P),H=a.a.memo((function(e){return Object(f.jsxs)("div",{className:R.a.layout,children:[Object(f.jsx)(U,{changeThemeHandler:e.changeThemeHandler}),Object(f.jsx)("main",{className:R.a.main,children:e.children})]})})),G=n(35),V=n.n(G),z=function(){var e=Object(r.useContext)(b).sortedCoordinates.map((function(e,t){return Object(f.jsx)(d.Line,{className:V.a.line,from:e[0],to:e[1],stroke:"#FF5533",strokeWidth:2,strokeLinecap:"round"},t)}));return Object(f.jsx)(f.Fragment,{children:e})},B=n(36),W=n.n(B),q=a.a.memo((function(){var e=Object(r.useContext)(b),t=e.selectedCountries,n=e.allCoordinates,a=t.map((function(e){return Object(f.jsxs)(d.Marker,{className:W.a.marker,coordinates:n.get[e],children:[Object(f.jsx)("circle",{r:6,stroke:"#fff",strokeWidth:2}),Object(f.jsx)("text",{textAnchor:"middle",y:"25",children:e})]},e)}));return Object(f.jsx)(f.Fragment,{children:a})})),J=n(37),X=n.n(J),Y=a.a.memo((function(e){return Object(f.jsxs)(d.ComposableMap,{className:X.a.map,projectionConfig:{center:[9,49],scale:1100},children:[Object(f.jsx)(d.Geographies,{"data-testid":"geographies",geography:e.geoUrl,children:e.countriesDrawHandler}),Object(f.jsx)(z,{}),Object(f.jsx)(q,{})]})})),K=n(4);function Q(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,r=n.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){var n,r={},a=Object(K.a)(e);try{var c=function(){var e=n.value,a=e.name,c=t.map((function(t){return e[t]}));r[a]=c};for(a.s();!(n=a.n()).done;)c()}catch(s){a.e(s)}finally{a.f()}return r}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("".concat(h,"/countries.json"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("".concat(g,"/positions"));case 2:return t=e.sent,n=t.data,r=$(n,["long","lat"]),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("".concat(g,"/flag/images"));case 2:return t=e.sent,n=t.data,r=$(n,["flag"]),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(_),s=Object(l.a)(c,2),o=s[0],p=s[1],j=Object(r.useContext)(b),h=j.allCoordinates,g=j.allFlags,x=j.selectedCountries,v=j.dragItem,N=h.set,k=g.set,w=Object(r.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return t=e.sent,a(t),e.next=6,ne();case 6:return n=e.sent,N(n),e.next=10,ae();case 10:r=e.sent,k(r);case 12:case"end":return e.stop()}}),e)}))),[a,N,k]);Object(r.useEffect)((function(){w()}),[w]),Object(r.useEffect)((function(){["-primary-color","-secondary-color","-list-color","-list-border-color","-text-color","-text-border-color","-card-border-color","-marker-color","-line-color"].forEach((function(e){var t=getComputedStyle(document.documentElement).getPropertyValue("--".concat(o+e));document.documentElement.style.setProperty("--selected".concat(e),t)}))}),[o]);return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(H,{changeThemeHandler:function(){p((function(e){return e===C?_:C}))},children:[Object(f.jsx)(Y,{countriesDrawHandler:function(e){return e.geographies.filter((function(e){return"Europe"===e.properties.REGION_UN})).map((function(e){return Object(f.jsx)(d.Geography,{geography:e,fill:"#EAEAEC",stroke:"#D6D6DA"},e.rsmKey)}))},geoUrl:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"}),Object(f.jsxs)(m,{children:[Object(f.jsx)(M,{listType:O,countries:n,title:"All Countries",subtitle:"(drag to select)",highlighted:v.get.type===y}),Object(f.jsx)(M,{listType:y,countries:x,title:"Selected Countries",subtitle:"(drag to remove)",highlighted:v.get.type===O})]})]})})},oe=(n(50),n(11)),ie=n(26),ue=function(e){var t=function(e){var t=[];return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===n.length)r[0]&&r.push(r[0]),t.push(r);else for(var a=0;a<n.length;a++){var c=n.slice(),s=c.splice(a,1);e(c.slice(),r.concat(s))}}(e),t}(e),n=function(e){var t,n,r,a={distance:1e3,path:[]},c=Object(K.a)(e);try{for(c.s();!(t=c.n()).done;){for(var s=t.value,o=0,i=0;i<s.length-1;i++)o+=(n=s[i],(r=s[i+1])?Math.sqrt(Math.abs(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2))):0);a.distance>=o&&(a.distance=o,a.path=s)}}catch(u){c.e(u)}finally{c.f()}return{path:a.path,distance:a.distance}}(t);return n.path.map((function(e,t,n){var r=n[t+1];return t===n.length-1&&(r=n[0]),[e,r]}))},le={},de=function(e,t){switch(t.type){case x:return Object(ie.a)(Object(ie.a)({},e),{},Object(oe.a)({},t.countryName,t.countryCoordinates));case v:var n=e;return delete n[t.countryName],Object(ie.a)({},n);default:return le}},pe=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({}),o=Object(l.a)(s,2),i=o[0],u=o[1],d=Object(r.useState)({}),p=Object(l.a)(d,2),j=p[0],m=p[1],h=Object(r.useState)([]),g=Object(l.a)(h,2),O=g[0],y=g[1],C=Object(r.useReducer)(de,le),_=Object(l.a)(C,2),N=_[0],k=_[1];Object(r.useEffect)((function(){var e=Object.values(N);y(ue(e))}),[N]);var w=Object(r.useMemo)((function(){return{addCountry:function(e){k({type:x,countryName:e,countryCoordinates:i[e]})},removeCountry:function(e){k({type:v,countryName:e})}}}),[i]),E={selectedCountries:Object.keys(N),addSelectedCountry:function(e){w.addCountry(e)},removeSelectedCountry:function(e){w.removeCountry(e)},sortedCoordinates:O,dragItem:{set:c,get:a},allCoordinates:{set:u,get:i},allFlags:{set:m,get:j}};return Object(f.jsx)(b.Provider,{value:E,children:e.children})};s.a.render(Object(f.jsx)(pe,{children:Object(f.jsx)(se,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.5fc5616d.chunk.js.map